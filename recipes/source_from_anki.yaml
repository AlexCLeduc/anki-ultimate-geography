- build_parts:
  - notes_from_crowd_anki:
      source: brain_brew_build/Ultimate Geography/
      part_id: standard notes
      sort_order: [Country]
      # save_to_file: src/deck_parts/notes/english.yaml
  - note_models_from_crowd_anki:
    - source: brain_brew_build/Ultimate Geography/
      part_id: Ultimate Geography
      # save_to_file: src/deck_parts/note_models/Ultimate Geography.yaml
  - headers_from_crowd_anki:
    - source: brain_brew_build/Ultimate Geography/
      part_id: default
      # save_to_file: src/deck_parts/headers/default.yaml
  - media_group_from_crowd_anki:
    - source: brain_brew_build/Ultimate Geography/
      part_id: all_anki_media
  - save_media_group_to_folder:
      parts: [all_anki_media]
      folder: src/deck_parts/media
      clear_folder: false
      recursive: true

- generate_csvs:
   notes: standard notes

   note_model_mappings:
     - note_models:
         - Ultimate Geography

       columns_to_fields:
         guid: guid
         tags: tags

         country: Country
         country info: Country Info

         capital: Capital
         capital info: Capital Info
         capital hint: Capital hint

         flag: flag
         flag similarity: Flag similarity

         map: map

       personal_fields: []

   file_mappings:
      - file: src/data/split/main.csv
        note_model: Ultimate Geography

        derivatives:
          - file: src/data/split/country.csv
            sort_by_columns: [ country ]
          - file: src/data/split/country_info.csv
            sort_by_columns: [ country ]

          - file: src/data/split/capital.csv
            sort_by_columns: [ country ]
          - file: src/data/split/capital_info.csv
            sort_by_columns: [ country ]
          - file: src/data/split/capital_hint.csv
            sort_by_columns: [ country ]

          - file: src/data/split/flag_similarity.csv
            sort_by_columns: [ country ]
